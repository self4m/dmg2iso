# 一、操作说明

使用苹果官方的系统安装程序将系统安装器安装到 macOS 的 `应用程序` 中  

再通过安装器内置的 `createinstallmedia` 工具将包含引导程序的安装器写入临时镜像文件  

并将临时镜像文件转换为经过压缩的  DMG 镜像文件以及可以引导启动的 iso 格式的镜像文件  

  

！！！**只支持 macOS 10.13 ~ 至今的镜像系统**！！！  

！！！**只支持 macOS 10.13 ~ 至今的镜像系统**！！！  

！！！**只支持 macOS 10.13 ~ 至今的镜像系统**！！！  

  

可以通过 https://github.com/corpnewt/gibMacOS 工具下载镜像文件并将安装程序安装在 macOS 的 `应用程序` 中  

---

# 二、运行环境

- macOS 系统（这点很难绷，要是有  谁还搞 iso ）
- python 环境 推荐使用 python 3.8 及以上版本

---

# 三、使用方法

1. 使用苹果官方的系统安装程序将系统安装器安装到 macOS 的 `应用程序` 中  

2. 执行脚本生成镜像文件

   - 双击执行

   ```
   双击 dmg2iso.command 即可开始处理
   ```

   - 命令行执行

   ```bash
   # 在 Tetminal 中执行 python3 dmg2iso.py 命令即可开始处理
   python3 dmg2iso.py
   ```

3. 转换后的镜像文件存储于脚本目录的 `iso` 文件夹中

   - DMG 文件仅可在 macOS 系统上使用

     （如果无需生成 DMG 文件 可使用 dmg2iso_without_dmg.command 生成镜像文件）

   - ISO 文件可用于虚拟机或者是制作启动盘等

4. 压缩 `iso` 文件（可选）

   生成临时镜像时已尽可能的缩小大小了，但是仍需预留空间以供安装器使用  

   由于 `iso` 文件的性质，所以转换生成的文件大小将与临时镜像的大小相同  

   使用压缩脚本重构 `iso` 文件，预计将会节省 1G 左右的空间

   - 双击执行

   ```
   双击 optimize_iso.command 即可开始处理
   ```

   - 命令行执行

   ```bash
   # 在 Tetminal 中执行 python3 optimize_iso.py 命令即可开始处理
   python3 optimize_iso.py
   ```

# 四、注意

1. 确保留有足够的空间以供脚本处理

   以 Sonoma 为例，安装器 、临时镜像 、DMG 镜像、ISO 镜像分别占用 12.75GB 15GB 13.5GB 14GB

2. 多次操作不同的镜像可能导致存储中的系统数据占用异常，重启大概率解决